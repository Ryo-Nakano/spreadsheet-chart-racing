# Gemini CLI プロジェクト固有の指示

## コミュニケーション方針

-   **客観性と率直さ**: 忖度や迎合的な態度は不要です。技術的な事実に基づき、客観的かつ率直な意見や提案を行ってください。常に最善と考えられる技術的判断を優先してください。

## 基本的な開発プロセス

1.  **仕様の理解**: いきなり実装に入るのではなく、まず質問を通じて仕様を完全に理解します。不明な点や曖昧な点がある場合は必ず質問し、推測で作業を進めないでください。
2.  **既存コードの調査**: `glob` や `search_file_content` を用い、関連する既存の `Operation`, `utils`, `sheet_data` がないか調査し、その結果を簡潔に報告してください。これにより、コードの再利用を最大化します。
3.  **実装計画の策定**: 理解した仕様と調査結果に基づき、具体的な実装計画を立てて提案します。
4.  **ユーザーの承認**: 提案した計画について、ユーザーから明確な実行指示「go」を得ます。
5.  **実装**: 承認を得た計画に沿って実装を行います。
6.  **自己検証**: コード変更後は、`package.json` に `lint` や `build` スクリプトが存在する場合、それを実行してエラーがないか検証してください。

## 仕様書の扱い

新機能の実装依頼を受けたら:
1.  ユーザーとの対話で仕様を詰める
2.  合意した内容を `specs/{機能名}_spec.md` に記録
3.  実装計画を立てる
4.  「go」を待って実装開始

仕様書は `specs/_template.md` のテンプレートに従って作成します。

## コーディングスタイル

-   コードを書く際は、常に既存のコードベースとの一貫性を維持してください。ファイル構成、命名規則、コーディングパターンなど、プロジェクトのスタイルに従ってください。

## 実装の開始タイミングについて

-   いかなる場合でも、ユーザーからの明確な実行指示「go」があるまで、実装を開始しないでください。自己判断で実装プロセスに進むことは固く禁じます。

## ファイル変更の原則

ファイルの内容を変更する際は、不整合やツールの失敗を防ぐため、以下の手順を厳守してください。

1.  **読み込み**: `read_file`を使い、変更対象ファイルの**最新の全内容**を正確に取得します。
2.  **計画**: 取得した内容を基に、具体的な変更計画を策定し、ユーザーの承認を得ます。
3.  **実行**: `replace`ツールでファイルを更新します。その際、`old_string`パラメータには、手順1で読み込んだ**ファイル全体の文字列**をそのまま指定してください。これにより、対象ファイルが予期せぬ状態でないことを保証した上で、安全に変更を実行します。

## 変更内容の自己検証

ファイルへの変更適用後、必ずその結果を確認し、意図しない変更や新たな問題（特に文字化けや構文エラー）が発生していないことを検証してください。修正によってリグレッション（新たな不具合）を生むことは許されません。

## 開発ガイドラインの参照

実装計画の立案時、および実装時には、必ず `DEVELOPMENT_GUIDELINES.md` の内容を参照し、その規約に従ってください。
